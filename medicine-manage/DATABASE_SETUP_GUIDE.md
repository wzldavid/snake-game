# äº‘å¼€å‘æ•°æ®åº“å»ºç«‹æŒ‡å—

## ğŸ“‹ æ•°æ®åº“ä¿¡æ¯

- **ç¯å¢ƒID**: `wzldavid-4gwhey9fe011d906`
- **æ•°æ®åº“ç±»å‹**: CloudBase æ–‡æ¡£æ•°æ®åº“(NoSQL)
- **æ§åˆ¶å°åœ°å€**: https://console.cloud.tencent.com/tcb?envId=wzldavid-4gwhey9fe011d906

## ğŸ—„ï¸ éœ€è¦åˆ›å»ºçš„é›†åˆ

### 1. users - ç”¨æˆ·è¡¨

**é›†åˆåç§°**: `users`

**å­—æ®µè¯´æ˜**:

| å­—æ®µå | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|--------|------|------|------|
| _id | String | æ˜¯ | æ–‡æ¡£å”¯ä¸€ID(è‡ªåŠ¨ç”Ÿæˆ) |
| _openid | String | æ˜¯ | ç”¨æˆ·å¾®ä¿¡openid |
| nickname | String | æ˜¯ | è€äººæ˜µç§° |
| avatar | String | å¦ | å¤´åƒURL |
| gender | Number | æ˜¯ | æ€§åˆ«(0:æœªçŸ¥ 1:ç”· 2:å¥³) |
| birthday | String | å¦ | å‡ºç”Ÿæ—¥æœŸ(YYYY-MM-DD) |
| age | Number | å¦ | å¹´é¾„ |
| hasDiabetes | Boolean | æ˜¯ | æ˜¯å¦æ‚£æœ‰ç³–å°¿ç—… |
| hasHypertension | Boolean | æ˜¯ | æ˜¯å¦æ‚£æœ‰é«˜è¡€å‹ |
| emergencyContact | String | å¦ | ç´§æ€¥è”ç³»äºº |
| emergencyPhone | String | å¦ | ç´§æ€¥è”ç³»ç”µè¯ |
| createTime | Date | æ˜¯ | åˆ›å»ºæ—¶é—´ |
| updateTime | Date | æ˜¯ | æ›´æ–°æ—¶é—´ |
| lastLoginTime | Date | å¦ | æœ€åç™»å½•æ—¶é—´ |

**æµ‹è¯•æ•°æ®**: 2æ¡è®°å½•

### 2. blood_glucose - è¡€ç³–è®°å½•è¡¨

**é›†åˆåç§°**: `blood_glucose`

**å­—æ®µè¯´æ˜**:

| å­—æ®µå | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|--------|------|------|------|
| _id | String | æ˜¯ | æ–‡æ¡£å”¯ä¸€ID(è‡ªåŠ¨ç”Ÿæˆ) |
| _openid | String | æ˜¯ | ç”¨æˆ·openid |
| measureTime | Date | æ˜¯ | æµ‹é‡æ—¶é—´ |
| measureType | Number | æ˜¯ | æµ‹é‡ç±»å‹(1-5) |
| measureTypeName | String | æ˜¯ | æµ‹é‡ç±»å‹åç§° |
| value | Number | æ˜¯ | è¡€ç³–å€¼(mmol/L) |
| isAbnormal | Boolean | æ˜¯ | æ˜¯å¦å¼‚å¸¸ |
| abnormalType | Number | æ˜¯ | å¼‚å¸¸ç±»å‹(0:æ­£å¸¸ 1:é«˜ 2:ä½) |
| abnormalReason | String | å¦ | å¼‚å¸¸åŸå›  |
| photoUrl | String | å¦ | ç…§ç‰‡URL |
| note | String | å¦ | å¤‡æ³¨ |
| createTime | Date | æ˜¯ | åˆ›å»ºæ—¶é—´ |

**æµ‹é‡ç±»å‹**:
- 1: ç©ºè…¹
- 2: æ—©é¤å
- 3: åˆé¤å
- 4: æ™šé¤å
- 5: ç¡å‰

**æµ‹è¯•æ•°æ®**: 157æ¡è®°å½•

### 3. blood_pressure - è¡€å‹è®°å½•è¡¨

**é›†åˆåç§°**: `blood_pressure`

**å­—æ®µè¯´æ˜**:

| å­—æ®µå | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|--------|------|------|------|
| _id | String | æ˜¯ | æ–‡æ¡£å”¯ä¸€ID(è‡ªåŠ¨ç”Ÿæˆ) |
| _openid | String | æ˜¯ | ç”¨æˆ·openid |
| measureTime | Date | æ˜¯ | æµ‹é‡æ—¶é—´ |
| systolic | Number | æ˜¯ | æ”¶ç¼©å‹(mmHg) |
| diastolic | Number | æ˜¯ | èˆ’å¼ å‹(mmHg) |
| heartRate | Number | å¦ | å¿ƒç‡(bpm) |
| isAbnormal | Boolean | æ˜¯ | æ˜¯å¦å¼‚å¸¸ |
| abnormalType | Number | æ˜¯ | å¼‚å¸¸ç±»å‹(0:æ­£å¸¸ 1:é«˜ 2:ä½) |
| abnormalReason | String | å¦ | å¼‚å¸¸åŸå›  |
| photoUrl | String | å¦ | ç…§ç‰‡URL |
| note | String | å¦ | å¤‡æ³¨ |
| createTime | Date | æ˜¯ | åˆ›å»ºæ—¶é—´ |

**æµ‹è¯•æ•°æ®**: 87æ¡è®°å½•

## ğŸš€ è¯¦ç»†æ“ä½œæ­¥éª¤

### æ­¥éª¤1: æ‰“å¼€äº‘å¼€å‘æ§åˆ¶å°

1. ç‚¹å‡»ä»¥ä¸‹é“¾æ¥è¿›å…¥æ§åˆ¶å°:
   ```
   https://console.cloud.tencent.com/tcb?envId=wzldavid-4gwhey9fe011d906
   ```

2. ç™»å½•è…¾è®¯äº‘è´¦å·(å¦‚æœå°šæœªç™»å½•)

### æ­¥éª¤2: è¿›å…¥æ•°æ®åº“ç®¡ç†

1. åœ¨å·¦ä¾§èœå•æ æ‰¾åˆ°"äº‘å¼€å‘"
2. ç‚¹å‡»è¿›å…¥"æ•°æ®åº“" â†’ "æ–‡æ¡£æ•°æ®åº“"
3. è¿›å…¥æ•°æ®åº“ç®¡ç†é¡µé¢

### æ­¥éª¤3: åˆ›å»º users é›†åˆ

#### 3.1 åˆ›å»ºé›†åˆ
1. ç‚¹å‡»"æ–°å»ºé›†åˆ"æŒ‰é’®
2. è¾“å…¥é›†åˆåç§°: `users`
3. ç‚¹å‡»"ç¡®å®š"

#### 3.2 å¯¼å…¥æµ‹è¯•æ•°æ®
1. æ‰“å¼€é¡¹ç›®ç›®å½•: `d:/project/medicine-manage/cloud-database-test-data.json`
2. ä½¿ç”¨æ–‡æœ¬ç¼–è¾‘å™¨(å¦‚VSCodeã€è®°äº‹æœ¬)æ‰“å¼€æ–‡ä»¶
3. æ‰¾åˆ° `"users": [` éƒ¨åˆ†(ä»ç¬¬2è¡Œå¼€å§‹)
4. å¤åˆ¶æ•´ä¸ª `users` æ•°ç»„çš„å†…å®¹,åŒ…æ‹¬2ä¸ªç”¨æˆ·çš„æ‰€æœ‰æ•°æ®
5. åœ¨æ§åˆ¶å°ç‚¹å‡» `users` é›†åˆ
6. ç‚¹å‡»"æ·»åŠ æ–‡æ¡£"æˆ–"å¯¼å…¥"æŒ‰é’®
7. é€‰æ‹©"JSONå¯¼å…¥"æˆ–ç›´æ¥ç²˜è´´JSON
8. å°†å¤åˆ¶çš„å†…å®¹ç²˜è´´åˆ°è¾“å…¥æ¡†
9. ç‚¹å‡»"ç¡®å®š"å®Œæˆå¯¼å…¥

**ç”¨æˆ·æ•°æ®ç¤ºä¾‹**:
```json
[
  {
    "_openid": "test_openid_zhang_001",
    "nickname": "å¼ å¤§çˆ·",
    "avatar": "",
    "gender": 1,
    "birthday": "1955-03-15",
    "age": 70,
    "hasDiabetes": true,
    "hasHypertension": true,
    "emergencyContact": "å¼ ä¸‰",
    "emergencyPhone": "13812348888",
    "createTime": "2026-01-01T06:45:09.357Z",
    "updateTime": "2026-01-31T06:45:09.357Z",
    "lastLoginTime": "2026-01-31T06:45:09.357Z"
  },
  {
    "_openid": "test_openid_liu_001",
    "nickname": "åˆ˜å¤§å¦ˆ",
    "avatar": "",
    "gender": 2,
    "birthday": "1958-06-20",
    "age": 67,
    "hasDiabetes": true,
    "hasHypertension": false,
    "emergencyContact": "æå››",
    "emergencyPhone": "13987654321",
    "createTime": "2026-01-01T06:45:09.357Z",
    "updateTime": "2026-01-31T06:45:09.357Z",
    "lastLoginTime": "2026-01-31T06:45:09.357Z"
  }
]
```

#### 3.3 éªŒè¯å¯¼å…¥
- åœ¨é›†åˆåˆ—è¡¨ä¸­åº”è¯¥æ˜¾ç¤º `users` é›†åˆ
- ç‚¹å‡»é›†åˆåº”è¯¥çœ‹åˆ° 2 æ¡è®°å½•
- æ¯æ¡è®°å½•åŒ…å«å®Œæ•´çš„ç”¨æˆ·ä¿¡æ¯

### æ­¥éª¤4: åˆ›å»º blood_glucose é›†åˆ

#### 4.1 åˆ›å»ºé›†åˆ
1. ç‚¹å‡»"æ–°å»ºé›†åˆ"æŒ‰é’®
2. è¾“å…¥é›†åˆåç§°: `blood_glucose`
3. ç‚¹å‡»"ç¡®å®š"

#### 4.2 å¯¼å…¥æµ‹è¯•æ•°æ®
1. åœ¨ `cloud-database-test-data.json` ä¸­æ‰¾åˆ° `"blood_glucose": [` éƒ¨åˆ†
2. å¤åˆ¶æ•´ä¸ª `blood_glucose` æ•°ç»„çš„å†…å®¹(157æ¡è®°å½•)
3. åœ¨æ§åˆ¶å°ç‚¹å‡» `blood_glucose` é›†åˆ
4. ç‚¹å‡»"æ·»åŠ æ–‡æ¡£"æˆ–"å¯¼å…¥"æŒ‰é’®
5. ç²˜è´´JSONæ•°æ®
6. ç‚¹å‡»"ç¡®å®š"

**æç¤º**: å¦‚æœä¸€æ¬¡æ€§ç²˜è´´å¤±è´¥,å¯ä»¥åˆ†æ‰¹å¯¼å…¥,æ¯æ‰¹20-50æ¡

#### 4.3 éªŒè¯å¯¼å…¥
- é›†åˆåº”è¯¥æ˜¾ç¤º 157 æ¡è®°å½•
- æ¯æ¡è®°å½•åŒ…å«è¡€ç³–æµ‹é‡æ•°æ®

### æ­¥éª¤5: åˆ›å»º blood_pressure é›†åˆ

#### 5.1 åˆ›å»ºé›†åˆ
1. ç‚¹å‡»"æ–°å»ºé›†åˆ"æŒ‰é’®
2. è¾“å…¥é›†åˆåç§°: `blood_pressure`
3. ç‚¹å‡»"ç¡®å®š"

#### 5.2 å¯¼å…¥æµ‹è¯•æ•°æ®
1. åœ¨ `cloud-database-test-data.json` ä¸­æ‰¾åˆ° `"blood_pressure": [` éƒ¨åˆ†
2. å¤åˆ¶æ•´ä¸ª `blood_pressure` æ•°ç»„çš„å†…å®¹(87æ¡è®°å½•)
3. åœ¨æ§åˆ¶å°ç‚¹å‡» `blood_pressure` é›†åˆ
4. ç‚¹å‡»"æ·»åŠ æ–‡æ¡£"æˆ–"å¯¼å…¥"æŒ‰é’®
5. ç²˜è´´JSONæ•°æ®
6. ç‚¹å‡»"ç¡®å®š"

#### 5.3 éªŒè¯å¯¼å…¥
- é›†åˆåº”è¯¥æ˜¾ç¤º 87 æ¡è®°å½•
- æ¯æ¡è®°å½•åŒ…å«è¡€å‹æµ‹é‡æ•°æ®

### æ­¥éª¤6: é…ç½®å®‰å…¨è§„åˆ™

ä¸ºäº†ç¡®ä¿å°ç¨‹åºå’Œåå°ç³»ç»Ÿèƒ½å¤Ÿæ­£å¸¸è®¿é—®æ•°æ®,éœ€è¦é…ç½®å®‰å…¨è§„åˆ™ã€‚

#### 6.1 è¿›å…¥å®‰å…¨è§„åˆ™é…ç½®
1. åœ¨æ•°æ®åº“é¡µé¢,ç‚¹å‡»"å®‰å…¨è§„åˆ™"
2. æˆ–ç›´æ¥è®¿é—®: https://tcb.cloud.tencent.com/dev?envId=wzldavid-4gwhey9fe011d906#/db/doc/security

#### 6.2 ä¸º users é›†åˆé…ç½®è§„åˆ™
1. æ‰¾åˆ° `users` é›†åˆ
2. ç‚¹å‡»"ç¼–è¾‘"æˆ–"æ·»åŠ è§„åˆ™"
3. ç²˜è´´ä»¥ä¸‹è§„åˆ™:

**æµ‹è¯•ç¯å¢ƒè§„åˆ™**(æ¨èç”¨äºå¼€å‘æµ‹è¯•):
```json
{
  "read": true,
  "write": true
}
```

**ç”Ÿäº§ç¯å¢ƒè§„åˆ™**(æ¨èç”¨äºæ­£å¼ä¸Šçº¿):
```json
{
  "read": "auth != null && auth.openid == doc._openid",
  "write": "auth != null && auth.openid == doc._openid"
}
```

#### 6.3 ä¸º blood_glucose é›†åˆé…ç½®è§„åˆ™
ä½¿ç”¨åŒæ ·çš„è§„åˆ™:

**æµ‹è¯•ç¯å¢ƒ**:
```json
{
  "read": true,
  "write": true
}
```

**ç”Ÿäº§ç¯å¢ƒ**:
```json
{
  "read": "auth != null && auth.openid == doc._openid",
  "write": "auth != null && auth.openid == doc._openid"
}
```

#### 6.4 ä¸º blood_pressure é›†åˆé…ç½®è§„åˆ™
ä½¿ç”¨åŒæ ·çš„è§„åˆ™:

**æµ‹è¯•ç¯å¢ƒ**:
```json
{
  "read": true,
  "write": true
}
```

**ç”Ÿäº§ç¯å¢ƒ**:
```json
{
  "read": "auth != null && auth.openid == doc._openid",
  "write": "auth != null && auth.openid == doc._openid"
}
```

4. ç‚¹å‡»"ä¿å­˜"

## âœ… éªŒè¯æ¸…å•

### é›†åˆåˆ›å»ºéªŒè¯
- [ ] `users` é›†åˆå·²åˆ›å»º
- [ ] `users` é›†åˆåŒ…å« 2 æ¡è®°å½•
- [ ] `blood_glucose` é›†åˆå·²åˆ›å»º
- [ ] `blood_glucose` é›†åˆåŒ…å« 157 æ¡è®°å½•
- [ ] `blood_pressure` é›†åˆå·²åˆ›å»º
- [ ] `blood_pressure` é›†åˆåŒ…å« 87 æ¡è®°å½•

### æ•°æ®å®Œæ•´æ€§éªŒè¯
- [ ] users é›†åˆä¸­æ¯æ¡è®°å½•åŒ…å«æ‰€æœ‰å¿…å¡«å­—æ®µ
- [ ] blood_glucose é›†åˆä¸­æµ‹é‡æ—¶é—´å­—æ®µæ ¼å¼æ­£ç¡®
- [ ] blood_pressure é›†åˆä¸­æ•°å€¼å­—æ®µç±»å‹æ­£ç¡®

### å®‰å…¨è§„åˆ™éªŒè¯
- [ ] users é›†åˆå®‰å…¨è§„åˆ™å·²é…ç½®
- [ ] blood_glucose é›†åˆå®‰å…¨è§„åˆ™å·²é…ç½®
- [ ] blood_pressure é›†åˆå®‰å…¨è§„åˆ™å·²é…ç½®
- [ ] è§„åˆ™é…ç½®å·²ä¿å­˜

## ğŸ§ª åŠŸèƒ½æµ‹è¯•

### æµ‹è¯•1: å°ç¨‹åºè®¿é—®æ•°æ®
1. æ‰“å¼€å¾®ä¿¡å¼€å‘è€…å·¥å…·
2. ç¼–è¯‘å°ç¨‹åº
3. è¿›å…¥"æˆ‘çš„"é¡µé¢
4. åº”è¯¥èƒ½åŠ è½½ç”¨æˆ·ä¿¡æ¯

### æµ‹è¯•2: æ–°ç”¨æˆ·æ³¨å†Œ
1. æ¸…é™¤å°ç¨‹åºç¼“å­˜
2. é‡æ–°æ‰“å¼€å°ç¨‹åº
3. è¿›å…¥"æˆ‘çš„"é¡µé¢
4. åº”è¯¥è‡ªåŠ¨æ³¨å†Œæ–°ç”¨æˆ·

### æµ‹è¯•3: æ·»åŠ è®°å½•
1. è¿›å…¥"è®°å½•è¡€ç³–"é¡µé¢
2. æ·»åŠ ä¸€æ¡è¡€ç³–è®°å½•
3. åœ¨æ§åˆ¶å° `blood_glucose` é›†åˆä¸­åº”è¯¥èƒ½çœ‹åˆ°æ–°è®°å½•

## âš ï¸ å¸¸è§é—®é¢˜

### é—®é¢˜1: å¯¼å…¥æ•°æ®æ—¶æç¤ºæ ¼å¼é”™è¯¯

**åŸå› **: JSONæ ¼å¼ä¸æ­£ç¡®

**è§£å†³**:
- ç¡®ä¿å¤åˆ¶çš„æ˜¯å®Œæ•´çš„æ•°ç»„å†…å®¹(åŒ…æ‹¬æ–¹æ‹¬å· `[]`)
- æ£€æŸ¥JSONæ ¼å¼,ç¡®ä¿é€—å·ã€å¼•å·æ­£ç¡®
- å°è¯•åˆ†æ‰¹å¯¼å…¥,æ¯æ¬¡20-50æ¡

### é—®é¢˜2: å¯¼å…¥åçœ‹ä¸åˆ°æ•°æ®

**åŸå› **: æ•°æ®æœªæ­£ç¡®ä¿å­˜æˆ–åˆ·æ–°é—®é¢˜

**è§£å†³**:
- åˆ·æ–°é¡µé¢
- é‡æ–°ç‚¹å‡»é›†åˆæŸ¥çœ‹
- æŸ¥çœ‹æµè§ˆå™¨æ§åˆ¶å°æ˜¯å¦æœ‰é”™è¯¯

### é—®é¢˜3: å°ç¨‹åºæ— æ³•è®¿é—®æ•°æ®

**åŸå› **: å®‰å…¨è§„åˆ™æœªé…ç½®æˆ–é…ç½®é”™è¯¯

**è§£å†³**:
- æ£€æŸ¥å®‰å…¨è§„åˆ™æ˜¯å¦å·²é…ç½®
- ä½¿ç”¨æµ‹è¯•ç¯å¢ƒè§„åˆ™: `{"read": true, "write": true}`
- ç¡®ä¿è§„åˆ™å·²ä¿å­˜

### é—®é¢˜4: åˆ›å»ºé›†åˆå¤±è´¥

**åŸå› **: é›†åˆåç§°å·²å­˜åœ¨æˆ–æƒé™ä¸è¶³

**è§£å†³**:
- æ£€æŸ¥é›†åˆæ˜¯å¦å·²å­˜åœ¨
- ç¡®è®¤ç™»å½•çš„è´¦å·æœ‰ç®¡ç†å‘˜æƒé™
- åˆ é™¤æ—§é›†åˆåé‡æ–°åˆ›å»º

## ğŸ“š ç›¸å…³æ–‡æ¡£

- æ•°æ®åº“è®¾è®¡: `specs/elderly-health-tracking/database.md`
- æµ‹è¯•æ•°æ®æ€»ç»“: `TEST_DATA_SUMMARY.md`
- å¿«é€Ÿå¯¼å…¥æŒ‡å—: `IMPORT_GUIDE.md`
- æ•°æ®éªŒè¯è„šæœ¬: `scripts/validateTestData.js`

## ğŸ”— å¿«é€Ÿé“¾æ¥

- äº‘å¼€å‘æ§åˆ¶å°: https://console.cloud.tencent.com/tcb?envId=wzldavid-4gwhey9fe011d906
- æ•°æ®åº“ç®¡ç†: https://tcb.cloud.tencent.com/dev?envId=wzldavid-4gwhey9fe011d906#/db/doc
- å®‰å…¨è§„åˆ™: https://tcb.cloud.tencent.com/dev?envId=wzldavid-4gwhey9fe011d906#/db/doc/security

---

**å‡†å¤‡å¥½å¼€å§‹å»ºç«‹æ•°æ®åº“äº†å—?æŒ‰ç…§ä¸Šè¿°æ­¥éª¤æ“ä½œå³å¯!** ğŸ¯
