# 测试数据导入任务清单

## ✓ 已完成的任务

- [x] 生成测试数据脚本
- [x] 生成导入脚本
- [x] 生成验证脚本
- [x] 生成测试数据 (244条记录)
- [x] 验证数据质量 (全部通过)
- [x] 创建导入指南
- [x] 创建快速参考卡
- [x] 创建数据总结文档

## 📋 待完成的任务

### 第一步: 导入测试数据到CloudBase数据库

#### 方法A: 云开发控制台手动导入 (推荐,最简单)

- [ ] 1. 打开云开发控制台
  ```
  https://console.cloud.tencent.com/tcb?envId=wzldavid-4gwhey9fe011d906
  ```

- [ ] 2. 进入"数据库" → "文档数据库"

- [ ] 3. 创建3个数据集合:
  - [ ] `users` (用户表)
  - [ ] `blood_glucose` (血糖记录表)
  - [ ] `blood_pressure` (血压记录表)

- [ ] 4. 导入用户数据
  - 打开 `cloud-database-test-data.json`
  - 复制 `users` 数组的所有数据
  - 粘贴到 `users` 集合中

- [ ] 5. 导入血糖数据
  - 打开 `cloud-database-test-data.json`
  - 复制 `blood_glucose` 数组的所有数据
  - 粘贴到 `blood_glucose` 集合中

- [ ] 6. 导入血压数据
  - 打开 `cloud-database-test-data.json`
  - 复制 `blood_pressure` 数组的所有数据
  - 粘贴到 `blood_pressure` 集合中

#### 方法B: 使用脚本自动导入

- [ ] 1. 安装CloudBase CLI
  ```bash
  npm install -g @cloudbase/cli
  ```

- [ ] 2. 登录CloudBase
  ```bash
  cloudbase login
  ```

- [ ] 3. 运行导入脚本
  ```bash
  node scripts/importTestData.js
  ```

### 第二步: 配置数据库安全规则

- [ ] 1. 打开安全规则配置页面
  ```
  https://tcb.cloud.tencent.com/dev?envId=wzldavid-4gwhey9fe011d906#/db/doc/security
  ```

- [ ] 2. 为 `users` 集合设置规则
  ```json
  {
    "read": true,
    "write": true
  }
  ```
  (测试环境,生产环境请使用更严格的规则)

- [ ] 3. 为 `blood_glucose` 集合设置规则
  ```json
  {
    "read": true,
    "write": true
  }
  ```

- [ ] 4. 为 `blood_pressure` 集合设置规则
  ```json
  {
    "read": true,
    "write": true
  }
  ```

### 第三步: 测试小程序功能

#### 使用张大爷账号测试

- [ ] 1. 登录小程序
  - OpenID: `test_openid_zhang_001`

- [ ] 2. 首页测试
  - [ ] 查看今日数据统计
  - [ ] 查看快捷操作按钮
  - [ ] 查看最近记录列表

- [ ] 3. 历史记录测试
  - [ ] 查看血糖历史记录 (应显示77条)
  - [ ] 查看血压历史记录 (应显示42条)
  - [ ] 测试筛选功能

- [ ] 4. 趋势图表测试
  - [ ] 查看血糖趋势图
  - [ ] 查看血压趋势图
  - [ ] 测试时间范围切换(7天/30天/90天)
  - [ ] 验证异常数据标记

- [ ] 5. 记录新数据测试
  - [ ] 手动记录血糖
  - [ ] 手动记录血压
  - [ ] 测试异常值预警
  - [ ] 查看新记录是否保存成功

- [ ] 6. 个人中心测试
  - [ ] 查看个人资料
  - [ ] 编辑个人资料
  - [ ] 查看统计数据

#### 使用刘大妈账号测试

- [ ] 1. 登录小程序
  - OpenID: `test_openid_liu_001`

- [ ] 2. 重复上述1-6步测试

### 第四步: 测试后台管理系统

- [ ] 1. 启动后台服务
  ```bash
  cd admin
  npm run dev
  ```

- [ ] 2. 登录后台
  - 使用管理员账号登录

- [ ] 3. 仪表盘测试
  - [ ] 查看用户统计(应显示2个用户)
  - [ ] 查看记录统计
  - [ ] 查看异常统计

- [ ] 4. 用户管理测试
  - [ ] 查看用户列表
  - [ ] 查看用户详情
  - [ ] 查看用户健康数据

### 第五步: 数据验证

- [ ] 1. 验证数据完整性
  - [ ] 检查用户数量: 应为2个
  - [ ] 检查血糖记录: 应为157条
  - [ ] 检查血压记录: 应为87条

- [ ] 2. 验证异常数据
  - [ ] 血糖异常记录: 应为11条 (7%)
  - [ ] 血压异常记录: 应为11条 (13%)

- [ ] 3. 验证时间范围
  - [ ] 最旧数据: 2026-01-01
  - [ ] 最新数据: 2026-01-31

## 📚 参考文档

| 文档 | 用途 |
|------|------|
| [IMPORT_GUIDE.md](./IMPORT_GUIDE.md) | 快速导入指南(必读) |
| [TEST_DATA_SUMMARY.md](./TEST_DATA_SUMMARY.md) | 测试数据详细说明 |
| [scripts/QUICK_REFERENCE.md](./scripts/QUICK_REFERENCE.md) | 快速参考卡 |
| [scripts/README.md](./scripts/README.md) | 完整脚本说明 |

## 💡 提示

1. **导入优先**: 完成数据导入后再测试小程序功能
2. **安全规则**: 测试环境可以使用宽松规则,生产环境必须配置严格规则
3. **测试账号**: 使用提供的测试openid登录,不要使用真实的微信openid
4. **数据备份**: 如需清空数据,建议先备份重要数据
5. **问题排查**: 遇到问题先查看 `scripts/QUICK_REFERENCE.md` 的问题排查章节

## ✅ 完成标准

当完成以下所有检查项时,表示测试数据导入和使用完成:

- [ ] 数据库中有2个用户记录
- [ ] 数据库中有157条血糖记录
- [ ] 数据库中有87条血压记录
- [ ] 张大爷账号可以正常登录并查看所有数据
- [ ] 刘大妈账号可以正常登录并查看所有数据
- [ ] 趋势图表可以正常显示
- [ ] 异常数据可以正确标记和预警
- [ ] 后台管理系统可以查看用户和数据

---

**创建时间**: 2026-01-31
**预计完成时间**: 30分钟
**难度等级**: ⭐ 简单
