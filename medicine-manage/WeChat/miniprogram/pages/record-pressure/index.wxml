<!--pages/record-pressure/index.wxml-->
<view class="container">
  <!-- 页面标题 -->
  <view class="page-header">
    <text class="page-title">记录血压</text>
    <text class="page-subtitle">手动输入或拍照识别</text>
  </view>

  <!-- 血压值输入 -->
  <view class="card fade-in">
    <view class="card-title text-lg">血压值</view>
    <view class="pressure-inputs">
      <view class="pressure-input-group">
        <input 
          class="input-large text-number" 
          type="number" 
          placeholder="收缩压" 
          value="{{systolic}}"
          bindinput="onSystolicInput"
        />
        <text class="input-unit text-sm">mmHg</text>
      </view>
      <text class="pressure-separator text-number">/</text>
      <view class="pressure-input-group">
        <input 
          class="input-large text-number" 
          type="number" 
          placeholder="舒张压" 
          value="{{diastolic}}"
          bindinput="onDiastolicInput"
        />
        <text class="input-unit text-sm">mmHg</text>
      </view>
    </view>
    <view class="input-tip text-sm text-secondary">
      正常范围: &lt; 120/80 mmHg
    </view>
  </view>

  <!-- 心率输入 -->
  <view class="card fade-in">
    <view class="card-title text-lg">心率(可选)</view>
    <view class="input-section">
      <input 
        class="input-large text-number" 
        type="number" 
        placeholder="请输入心率" 
        value="{{heartRate}}"
        bindinput="onHeartRateInput"
      />
      <text class="input-unit text-sm">次/分</text>
    </view>
  </view>

  <!-- 测量时间 -->
  <view class="card fade-in">
    <view class="card-title text-lg">测量时间</view>
    <picker mode="time" value="{{measureTime}}" bindchange="onTimeChange">
      <view class="picker">
        <text class="picker-text text-md">{{measureTime || '请选择测量时间'}}</text>
        <text class="picker-arrow text-xl">›</text>
      </view>
    </picker>
  </view>

  <!-- 照片识别 -->
  <view class="card fade-in">
    <view class="card-title text-lg">快速记录</view>
    <view class="photo-actions">
      <button class="photo-btn" bindtap="takePhoto">
        <text class="photo-icon">📷</text>
        <text class="photo-text text-md">拍照识别</text>
      </button>
      <button class="photo-btn" bindtap="chooseFromAlbum">
        <text class="photo-icon">🖼️</text>
        <text class="photo-text text-md">相册选择</text>
      </button>
    </view>
    <view wx:if="{{photoUrl}}" class="photo-preview">
      <image src="{{photoUrl}}" mode="aspectFit" class="preview-image"></image>
      <view class="photo-remove" bindtap="removePhoto">
        <text class="text-lg">✕</text>
      </view>
    </view>
    <view wx:if="{{recognizing}}" class="recognizing">
      <text class="text-md">AI识别中,请稍候...</text>
    </view>
  </view>

  <!-- 底部按钮 -->
  <view class="bottom-actions safe-area-bottom">
    <button class="btn btn-secondary btn-primary-large" bindtap="onCancel">取消</button>
    <button class="btn btn-primary btn-primary-large" bindtap="onSave">保存记录</button>
  </view>
</view>
