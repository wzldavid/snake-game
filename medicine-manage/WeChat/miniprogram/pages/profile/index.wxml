<!--pages/profile/index.wxml-->
<view class="container">
  <!-- ç”¨æˆ·ä¿¡æ¯å¡ç‰‡ -->
  <view class="user-card fade-in">
    <view class="user-avatar">
      <image src="{{userInfo.avatar || '/images/default-avatar.png'}}" class="avatar-image"></image>
    </view>
    <view class="user-info">
      <text class="user-name text-xl">{{userInfo.nickname || 'æœªè®¾ç½®'}}</text>
      <text class="user-desc text-md">{{userInfo.genderText || ''}} {{userInfo.age ? userInfo.age + 'å²' : ''}}</text>
    </view>
    <button class="edit-btn btn-text" bindtap="navigateToEditProfile">ç¼–è¾‘</button>
  </view>

  <!-- å¥åº·ä¿¡æ¯ -->
  <view class="card fade-in">
    <view class="card-title text-lg">å¥åº·ä¿¡æ¯</view>
    <view class="info-list">
      <view class="list-item" bindtap="toggleDiabetes">
        <view class="list-item-icon">
          <text>ğŸ©¸</text>
        </view>
        <view class="list-item-content">
          <view class="list-item-title text-md">ç³–å°¿ç—…</view>
          <view class="list-item-desc text-sm">{{userInfo.hasDiabetes ? 'å·²æ‚£ç—…' : 'æœªæ‚£ç—…'}}</view>
        </view>
        <text class="list-item-arrow">â€º</text>
      </view>
      <view class="divider"></view>
      <view class="list-item" bindtap="toggleHypertension">
        <view class="list-item-icon">
          <text>â¤ï¸</text>
        </view>
        <view class="list-item-content">
          <view class="list-item-title text-md">é«˜è¡€å‹</view>
          <view class="list-item-desc text-sm">{{userInfo.hasHypertension ? 'å·²æ‚£ç—…' : 'æœªæ‚£ç—…'}}</view>
        </view>
        <text class="list-item-arrow">â€º</text>
      </view>
    </view>
  </view>

  <!-- åŠŸèƒ½èœå• -->
  <view class="card fade-in">
    <view class="card-title text-lg">åŠŸèƒ½</view>
    <view class="list">
      <view class="list-item" bindtap="navigateToTrendGlucose">
        <view class="list-item-icon">
          <text>ğŸ“Š</text>
        </view>
        <text class="list-item-title text-md">è¡€ç³–è¶‹åŠ¿</text>
        <text class="list-item-arrow">â€º</text>
      </view>
      <view class="list-item" bindtap="navigateToTrendPressure">
        <view class="list-item-icon">
          <text>ğŸ“ˆ</text>
        </view>
        <text class="list-item-title text-md">è¡€å‹è¶‹åŠ¿</text>
        <text class="list-item-arrow">â€º</text>
      </view>
      <view class="list-item" bindtap="showAbout">
        <view class="list-item-icon">
          <text>â„¹ï¸</text>
        </view>
        <text class="list-item-title text-md">å…³äº</text>
        <text class="list-item-arrow">â€º</text>
      </view>
    </view>
  </view>

  <!-- ä½¿ç”¨ç»Ÿè®¡ -->
  <view class="card fade-in">
    <view class="card-title text-lg">ä½¿ç”¨ç»Ÿè®¡</view>
    <view class="stats-grid">
      <view class="stat-item">
        <text class="stat-number text-number">{{totalRecords}}</text>
        <text class="stat-label text-sm text-secondary">æ€»è®°å½•æ•°</text>
      </view>
      <view class="stat-item">
        <text class="stat-number text-number">{{glucoseRecords}}</text>
        <text class="stat-label text-sm text-secondary">è¡€ç³–è®°å½•</text>
      </view>
      <view class="stat-item">
        <text class="stat-number text-number">{{pressureRecords}}</text>
        <text class="stat-label text-sm text-secondary">è¡€å‹è®°å½•</text>
      </view>
      <view class="stat-item">
        <text class="stat-number text-number">{{usingDays}}</text>
        <text class="stat-label text-sm text-secondary">ä½¿ç”¨å¤©æ•°</text>
      </view>
    </view>
  </view>

  <!-- é€€å‡ºç™»å½• -->
  <button class="logout-btn btn-text" bindtap="handleLogout">é€€å‡ºç™»å½•</button>

  <!-- æµ‹è¯•åŠŸèƒ½ï¼ˆä»…å¼€å‘ç¯å¢ƒæ˜¾ç¤ºï¼‰ -->
  <view class="test-section fade-in" wx:if="{{isDev}}">
    <view class="card-title text-lg">æµ‹è¯•åŠŸèƒ½</view>
    <button class="test-btn" bindtap="importTestData">å¯¼å…¥å¼ å¤§çˆ·æµ‹è¯•æ•°æ®</button>
  </view>
</view>
